<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Firebase ë‹¤ì¤‘ ì—…ë¡œë“œ</title>

  <!-- âœ… Firebase SDK (Compat ë²„ì „) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

  <!-- âœ… favicon.ico ì—ëŸ¬ ë°©ì§€ -->
  <link rel="icon" href="data:,">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
    }
    input[type="file"] {
      margin-top: 10px;
    }
    button {
      margin-left: 10px;
      padding: 6px 14px;
    }
    ul {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>ğŸ“¤ Firebase ë‹¤ì¤‘ ì—…ë¡œë“œ</h2>
  <input type="file" id="fileInput" multiple>
  <button onclick="uploadFiles()">ì—…ë¡œë“œ</button>

  <ul id="uploadList"></ul>

  <script>
    // âœ… Firebase ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyDcTkxmGTFeChSCHVQbRU41uxBpT_215qw",
      authDomain: "object-viewer-uploader.firebaseapp.com",
      projectId: "object-viewer-uploader",
      storageBucket: "object-viewer-uploader.appspot.com",
      messagingSenderId: "371860249033",
      appId: "1:371860249033:web:825a7e133a4d460b573018",
      measurementId: "G-WZF3T2JWD5"
    };

    // âœ… Firebase ì´ˆê¸°í™”
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    function uploadFiles() {
      const files = document.getElementById('fileInput').files;
      const uploadList = document.getElementById('uploadList');
      uploadList.innerHTML = '';

      if (files.length === 0) {
        alert('íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”!');
        return;
      }

      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const storageRef = storage.ref().child('uploads/' + file.name);

        const li = document.createElement('li');
        li.textContent = file.name + ' ì—…ë¡œë“œ ì¤‘...';
        uploadList.appendChild(li);

        storageRef.put(file)
          .then(snapshot => {
            li.textContent = file.name + ' âœ… ì—…ë¡œë“œ ì™„ë£Œ';
            return snapshot.ref.getDownloadURL();
          })
          .then(url => {
            const a = document.createElement('a');
            a.href = url;
            a.textContent = ' [ë‹¤ìš´ë¡œë“œ ë§í¬]';
            a.target = '_blank';
            li.appendChild(a);
          })
          .catch(error => {
            li.textContent = file.name + ' âŒ ì˜¤ë¥˜: ' + error.message;
          });
      }
    }
  </script>

</body>
</html>
